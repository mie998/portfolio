# なにこのサイト？

元々ポートフォリオサイトを github-pages にて公開していました。その時は React コンポーネントを使用したルーティングもないただの静的サイトだったわけですが、react-router が v6 になって使いやすくなったとか、そもそもはてなブログに投稿する気がおきないだとか、まぁ今となってはよく覚えていない理由でブログ機能を追加することを決めました。結論からいうと React 周辺のライブラリを一通りざっと学ぶ良い機会になったのでやってよかったと思います。

# 基本機能

markdown 形式で書いた記事の投稿ができ、目次などが自動生成されます。タグごとに投稿一覧を閲覧できる機能も付けています。バンバン投稿してタグを増やしていきたいです。

投稿一覧ではソート機能を付けております。投稿順の昇順、降順と名前の昇順、降順の対応です。

# 使用技術

今回使用した技術をざっと紹介してみます。今後 `react-create-app` + `github-pages` で自作ブログを作りたい！って人は是非、技術選定の参考にしてくださいな。

## TypeScript

最初は JS で全部書いてたんですが、時代の流れを考慮して TS に換装しました。やっぱり世間で流行っているだけあって TS の良さはめちゃくちゃ感じました。例えば以下の点。

- 動的型付け特有のエラーは事前に弾いてくれるのでデバッグがめちゃ楽。JS でよくやってた `console.log` をあまり使わなかった
- 型定義さえしてればデータの取り扱いでミスが減る（というか、ミスしたら怒ってくれる）

また、今回使用したライブラリの範囲では型定義ファイルが公式に用意されていない、なんてことは一度もなかったです。利点はあるけどデメリットはあんまりない印象なので、今から勉強を始めるなら JS より TS なのかなーと思ったりしています。

## React 周辺

言わずと知れた react-create-app を使用しております。

ルーティングは react-router で、割と最近更新された v6 を使用してみました。筆者が v5 のヘビーユーザでないので正確な比較はできないかも知れないですが、例えば `useHistory` が `useNavigate` という関数でより簡潔に記述できるようになったり、ルーティングのネストが `<Switch>` から `<Routes>` に変更されたことなどが大きな変更点っぽいです。使っていて不満を感じた記憶はないので v6 おすすめです。

## CSS 周辺

Sass と MaterialUI にてスタイルの記述をしました。煩雑なスタイルを使いたい場合のみ Sass で、他は MaterialUI の useStyle でスタイルシートを作成してます。

Sass だとコンポーネント記述ファイルとスタイル記述ファイルが分割されちゃうので、コンポーネント志向としてはなんか微妙な気がして無理に useStyle を使って一つのファイルに閉じ込めるようにしたのですが、今となってはちょっと強引だったかなぁという感想です。4 つくらいめんどくさいポイントがあって、

- useStyle 内で変数を展開できないからスタイルがハードコーディングになる
- CSS にシンタックスハイライトが効かないのでスタイルの  変更がちょっと面倒
- ケバブケースの CSS 記述を キャメルケースにしなきゃいけない (`background-color` を `backgroundColor`にするとか)
- コード量が増対する。コンポーネントよりスタイルの記述の方が長くなることも。。。

特に一個めの問題が酷くて、スマホ対応用の `width` を変更したい！ってなったときにいちいち全部書き換えなきゃいけません。やってらんねー。。。

利点としては、あくまで関数としてスタイルを扱うので継承などがコンポーネント間で扱えるみたいなんですが、そもそも今回の開発範囲では有効に使える場面が少なかったです。

無理に一つのファイルにまとめるより程よく分離させた方がいいのかも知れないですね。

emotion, chakra あたりは気になっているんですが、今更書き換えるわけにも行かないのでまたの機会に〜

## その他

### issue でのタスク管理

issue でタスクを作成して、完了したら close するようにしていました。個人で issue を使う週間はなかったのですが、やってみるとめちゃくちゃ便利。自分がどのポイントで詰まったか、それをどうやって解決したかを全て残しておけるので、今後自分が同じようなエラーを踏んだ時に参考にできます。issue を作ることで課題が整理できるので、いちいち記憶しておく必要もありません。おすすめ。
もっと本格的にやるなら Github の Projects を使用してかんばん方式を導入し、タスク管理を徹底してもいいですが、今回は特に急いでなかったのでそこまではしていません。

### github actions

github actions で push 時に自動デプロイしてくれるようにしました。yaml 形式のファイルを入れとくだけで簡単にテストとかデプロイができるので感激でした。めちゃくちゃ便利。

# 苦労した点

リロード時に routing がうまく行かずにホームに毎回リダイレクトされる問題がありました。https://github.com/mie998/portfolio/issues/28 にて議論しているやつです。先駆者がスクリプトを用意してくれていたので助かりました。

記事中に画像を入れたい場合、github のレポジトリに画像ごと push することを考えましたが、ディレクトリが煩雑になりそうなのでやめました。某掲示板サイトよろしく imgur から読み込むようにしていますが、この仕様は今後変更するかも？

あと、apex がやめられないので開発が長引きました。

# 今後

WEB 開発も楽しいですが、ゲーム開発も興味があるのでやっていきたいです。ゲーム系インターンには学生のうちに行っておきたいのでこの春休みはゲーム開発をやろうと思います。緑で頭打ちになって最近できてない atcoder も水色まではやりたいなぁ。。。

この春は暇が結構ありそうなのでちょくちょくブログ投稿していこうと思います。
